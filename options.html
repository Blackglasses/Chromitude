<!DOCTYPE html>
<title>Chromitude - Options</title>
<link rel="icon" href="icons/16-on.png" type="image/png" />
<script>
    function updateShowNotifs(ele)
    {
        if(ele.checked)
            localStorage["show_notification"] = "on";
        else
            localStorage["show_notification"] = "off";
    }
    function updateInt(ele)
    {
        localStorage["update_int"] = ele.value;
    }
    function updateIntType(ele)
    {
        localStorage["update_type"] = ele.value;
    }
    function updateWhenActive(ele)
    {
        if(ele.checked)
            localStorage["only_update_when_active"] = "on";
        else
            localStorage["only_update_when_active"] = "off";
    }
    function updateWatch(ele)
    {
        if(ele.checked)
            localStorage["watchLoc"] = "on";
        else
            localStorage["watchLoc"] = "off";
    }
    function save()
    {
        updateShowNotifs(document.getElementById("showNotif"));
        updateInt(document.getElementById("updateEveryInt"));
        updateIntType(document.getElementById("updateIntType"));
        updateWhenActive(document.getElementById("whenNotIdle"));
        updateWatch(document.getElementById("watchLoc"));
        chrome.extension.sendRequest("updateInterval");
    }
    function toggleInt(ele)
    {
        if(ele.checked)
            document.getElementById("intLabel").display = "none";
        else
            document.getElementById("intLabel").display = "inline";
    }
</script>
<style>
    body { font-family: sans-serif; width: 400px; margin: 20px auto; }
    #donateButton { float: right;margin-top:5px; }
</style>
<fieldset>
    <legend>Chromitude Options</legend>
    <label><input type="checkbox" id="showNotif" /> Show Notifications on Update</label><br />
    <label><input type="checkbox" id="whenNotIdle" /> Only Update Location when Not Idle</label><br />
    <label><input type="checkbox" id="watchLoc" onclick="toggleInt(this)" /> Watch Changes in Location and Update Only When Changed <small>(BETA)</small></label><br />
    <label id="intLabel">Update Every <input type="number" id="updateEveryInt" size="2" /></label> <select id="updateIntType"><option value="h">hours</option><option value="m">minutes</option><option value="s">seconds</option></select><br />
    <span style="font-size:70%;">Note:  Your location will update on SAVE if Chromitude is currently turned On.</span><br />
    <div style="text-align:right;"><button onclick="self.close();">Close</button> <button onclick="save();self.close();">Save</button> <button onclick="save();">Apply</button></div>
</fieldset>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="donateButton">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="WFAZD6HFNB9MC">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
<script>
    toggleInt(document.getElementById("watchLoc"));
    if(localStorage["only_update_when_active"] == "on") document.getElementById("whenNotIdle").checked = true;
    if(localStorage["show_notification"] == "on") document.getElementById("showNotif").checked = true;
    if(!localStorage["update_int"]) localStorage["update_int"] = 5;
    document.getElementById("updateEveryInt").value = localStorage["update_int"];
    if(!localStorage["update_type"]) localStorage["update_type"] = "m";
    document.getElementById("updateIntType").value = localStorage["update_type"];
</script>